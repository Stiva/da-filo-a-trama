# ==========================================
# DA FILO A TRAMA - Variabili Ambiente
# ==========================================
# Copia questo file in .env.local e compila con i tuoi valori

# ------------------------------------------
# CLERK AUTHENTICATION
# ------------------------------------------
# Trova queste chiavi in: https://dashboard.clerk.com
# Settings > API Keys

NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_...
CLERK_SECRET_KEY=sk_test_...

# URL di redirect dopo login/registrazione
NEXT_PUBLIC_CLERK_SIGN_IN_URL=/sign-in
NEXT_PUBLIC_CLERK_SIGN_UP_URL=/sign-up
NEXT_PUBLIC_CLERK_AFTER_SIGN_IN_URL=/dashboard
NEXT_PUBLIC_CLERK_AFTER_SIGN_UP_URL=/onboarding

# Webhook secret per sincronizzazione profili
# Trova in: Clerk Dashboard > Webhooks > [tuo webhook] > Signing Secret
CLERK_WEBHOOK_SECRET=whsec_...

# ------------------------------------------
# SUPABASE
# ------------------------------------------
# Trova queste chiavi in: https://supabase.com/dashboard
# Settings > API

# URL del progetto Supabase
NEXT_PUBLIC_SUPABASE_URL=https://tuo-progetto.supabase.co

# Chiave pubblica (anon key) - sicura da esporre al client
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJ...

# Chiave service role - SOLO per operazioni server-side
# NON iniziare mai con NEXT_PUBLIC_ !!
SUPABASE_SERVICE_ROLE_KEY=eyJ...

# Connection string PostgreSQL diretta (opzionale, per migrazioni)
POSTGRES_URL="postgresql://postgres:PASSWORD@db.xxx.supabase.co:5432/postgres"

# ------------------------------------------
# CLERK JWT TEMPLATE PER SUPABASE
# ------------------------------------------
# In Clerk Dashboard > JWT Templates, crea un nuovo template chiamato "supabase"
# con questo payload:
#
# {
#   "aud": "authenticated",
#   "role": "authenticated",
#   "email": "{{user.primary_email_address}}",
#   "sub": "{{user.id}}",
#   "user_metadata": {
#     "role": "{{user.public_metadata.role}}"
#   }
# }
#
# Signing algorithm: HS256
# Signing key: Il JWT Secret di Supabase (Settings > API > JWT Secret)
