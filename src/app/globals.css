@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  /* ========================================
     PALETTE AGESCI - Da Filo a Trama 2026
     ======================================== */

  /* Colore principale - Viola AGESCI */
  --agesci-purple: #4b2c7f;
  --agesci-purple-light: #6b4c9f;
  --agesci-purple-dark: #3b1c6f;

  /* Giallo piu' caldo */
  --agesci-yellow: #f1b42f;
  --agesci-yellow-light: #f8cc6b;
  --agesci-yellow-dark: #d9a020;

  /* Colori accento */
  --brand-cyan: #29bbce;
  --brand-red: #e94e5a;

  /* Verde Branca L/C */
  --lc-green: #4eaf48;
  --lc-green-light: #6bc963;
  --lc-green-dark: #3a8f34;

  /* Sfondo */
  --scout-cream: #fdfaf6;

  /* Colori legacy (per compatibilita') */
  --agesci-blue: #4b2c7f; /* Mappato a purple per transizione */
  --agesci-blue-light: #6b4c9f;
  --agesci-blue-dark: #3b1c6f;
  --scout-green: #2D5016;
  --scout-green-light: #4A7C23;
  --scout-azure: #1E6091;
  --scout-azure-light: #2E86C1;
  --scout-wood: #8B4513;
  --scout-wood-light: #A0522D;

  /* ========================================
     SISTEMA SEMANTICO
     ======================================== */
  --background: var(--scout-cream);
  --foreground: var(--agesci-purple);
  --primary: var(--agesci-yellow);
  --primary-foreground: var(--agesci-purple);
  --secondary: var(--agesci-purple);
  --secondary-foreground: #ffffff;
  --accent: var(--lc-green);
  --accent-foreground: #ffffff;
  --muted: #f0ebe0;
  --muted-foreground: #6b7280;
  --destructive: var(--brand-red);
  --destructive-foreground: #ffffff;
  --border: #d4cfc0;
  --ring: var(--agesci-purple);
  --radius: 0.75rem;
}

/* ========================================
   BASE STYLES
   ======================================== */
* {
  box-sizing: border-box;
  padding: 0;
  margin: 0;
}

html,
body {
  max-width: 100vw;
  overflow-x: hidden;
}

body {
  color: var(--foreground);
  background: var(--background);
  font-feature-settings: 'rlig' 1, 'calt' 1;
}

/* Scrollbar personalizzata */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--muted);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: var(--agesci-blue);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--agesci-blue-light);
}

/* ========================================
   TIPOGRAFIA
   ======================================== */
h1, h2, h3, h4, h5, h6 {
  font-family: var(--font-quicksand), system-ui, sans-serif;
  font-weight: 700;
  line-height: 1.2;
}

h1 { font-size: 2.5rem; }
h2 { font-size: 2rem; }
h3 { font-size: 1.5rem; }
h4 { font-size: 1.25rem; }

@media (min-width: 768px) {
  h1 { font-size: 3rem; }
  h2 { font-size: 2.25rem; }
  h3 { font-size: 1.75rem; }
}

/* ========================================
   COMPONENTI - LAYER COMPONENTS
   ======================================== */
@layer components {
  /* Bottoni */
  /* Bottoni - Touch-safe con minimo 44px */
  .btn {
    @apply inline-flex items-center justify-center gap-2 px-6 py-3
           font-semibold rounded-xl transition-all duration-200
           focus:outline-none focus:ring-2 focus:ring-offset-2
           disabled:opacity-50 disabled:cursor-not-allowed
           min-h-[44px];
  }

  .btn-primary {
    @apply btn bg-agesci-yellow text-agesci-blue
           hover:shadow-playful hover:-translate-y-0.5
           active:scale-95 active:shadow-none active:translate-y-0
           focus:ring-agesci-yellow;
  }

  .btn-secondary {
    @apply btn bg-agesci-blue text-white
           hover:bg-agesci-blue-light hover:-translate-y-0.5
           active:scale-95 active:bg-agesci-blue-dark
           focus:ring-agesci-blue;
  }

  .btn-outline {
    @apply btn border-2 border-agesci-blue text-agesci-blue bg-transparent
           hover:bg-agesci-blue hover:text-white
           active:scale-95 active:bg-agesci-blue active:text-white
           focus:ring-agesci-blue;
  }

  .btn-ghost {
    @apply btn text-agesci-blue bg-transparent
           hover:bg-agesci-blue/10
           active:scale-95 active:bg-agesci-blue/20
           focus:ring-agesci-blue;
  }

  .btn-accent {
    @apply btn bg-lc-green text-white
           hover:bg-lc-green-dark hover:-translate-y-0.5
           active:scale-95 active:bg-lc-green-dark
           focus:ring-lc-green;
  }

  .btn-sm {
    @apply px-4 py-2.5 text-sm rounded-lg min-h-[44px];
  }

  .btn-lg {
    @apply px-8 py-4 text-lg rounded-2xl min-h-[48px];
  }

  /* Card */
  .card {
    @apply bg-scout-cream border-3 border-agesci-blue rounded-2xl
           shadow-playful transition-all duration-200;
  }

  .card-hover {
    @apply card hover:shadow-playful-lg hover:-translate-y-1;
  }

  /* Card asimmetrica stile "handcrafted" */
  .handcrafted-card {
    @apply bg-white border-2 border-agesci-purple transition-all duration-200;
    border-radius: 15px 30px 15px 30px;
    box-shadow: 4px 4px 0px var(--agesci-purple);
  }

  .handcrafted-card:hover {
    box-shadow: 6px 6px 0px var(--agesci-purple);
    transform: translateY(-2px);
  }

  .card-body {
    @apply p-6;
  }

  .card-header {
    @apply px-6 py-4 border-b border-agesci-blue/20;
  }

  .card-footer {
    @apply px-6 py-4 border-t border-agesci-blue/20;
  }

  /* Badge / Tag */
  .badge {
    @apply inline-flex items-center px-3 py-1 rounded-full text-sm font-medium;
  }

  .badge-blue {
    @apply badge bg-agesci-blue/10 text-agesci-blue;
  }

  .badge-yellow {
    @apply badge bg-agesci-yellow text-agesci-blue;
  }

  .badge-green {
    @apply badge bg-lc-green/10 text-lc-green-dark;
  }

  .badge-outline {
    @apply badge border-2 border-current bg-transparent;
  }

  /* Input - Touch-safe con minimo 44px */
  .input {
    @apply w-full px-4 py-3 rounded-lg border-2 border-agesci-blue/30
           bg-white text-agesci-blue placeholder:text-agesci-blue/40
           focus:outline-none focus:border-agesci-blue focus:ring-2 focus:ring-agesci-blue/20
           transition-all duration-200
           min-h-[44px];
  }

  .input-error {
    @apply input border-destructive focus:border-destructive focus:ring-destructive/20;
  }

  /* Select */
  .select {
    @apply input appearance-none bg-no-repeat bg-right pr-10;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2300417b'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
    background-size: 1.5rem;
    background-position: right 0.75rem center;
  }

  /* Label */
  .label {
    @apply block text-sm font-semibold text-agesci-blue mb-2;
  }

  /* Link stilizzato */
  .link {
    @apply text-agesci-blue underline decoration-agesci-yellow decoration-2
           underline-offset-4 hover:decoration-4 transition-all;
  }

  /* Sezione con sfondo decorativo */
  .section-wave {
    @apply relative overflow-hidden;
  }

  .section-wave::before {
    content: '';
    @apply absolute bottom-0 left-0 right-0 h-16;
    background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1440 100'%3E%3Cpath fill='%23fdfaf0' d='M0,50 C360,100 1080,0 1440,50 L1440,100 L0,100 Z'%3E%3C/path%3E%3C/svg%3E");
    background-size: cover;
  }

  /* Container responsive */
  .container-scout {
    @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8;
  }

  /* Animazione sottolineatura per nav link */
  .nav-link {
    @apply relative text-agesci-blue font-medium transition-colors;
  }

  .nav-link::after {
    content: '';
    @apply absolute bottom-0 left-0 w-0 h-0.5 bg-agesci-yellow transition-all duration-300;
  }

  .nav-link:hover::after {
    @apply w-full;
  }

  .nav-link.active::after {
    @apply w-full;
  }

  /* Icona decorativa */
  .icon-playful {
    @apply w-12 h-12 flex items-center justify-center rounded-2xl
           bg-agesci-yellow text-agesci-blue shadow-playful-sm;
  }

  /* ========================================
     TOUCH-FIRST UTILITIES
     ======================================== */

  /* Modal close button - touch safe 44px */
  .modal-close {
    @apply w-11 h-11 min-w-[44px] min-h-[44px]
           flex items-center justify-center rounded-full
           text-gray-400 hover:text-gray-600 hover:bg-gray-100
           active:bg-gray-200 transition-colors;
  }

  /* Responsive table wrapper */
  .table-responsive {
    @apply overflow-x-auto relative;
    -webkit-overflow-scrolling: touch;
  }

  /* Scroll indicator gradient (destra) */
  .table-responsive::after {
    content: '';
    @apply absolute right-0 top-0 bottom-0 w-6 pointer-events-none opacity-50;
    background: linear-gradient(to left, rgba(255,255,255,0.9), transparent);
  }

  /* Mobile card view per tabelle */
  .data-card {
    @apply bg-white rounded-lg shadow-md p-4 space-y-3;
  }

  .data-card-row {
    @apply flex justify-between items-center text-sm gap-2;
  }

  .data-card-label {
    @apply text-gray-500 font-medium flex-shrink-0;
  }

  .data-card-value {
    @apply text-gray-900 text-right;
  }

  .data-card-actions {
    @apply flex justify-end gap-3 pt-3 mt-3 border-t border-gray-100;
  }

  /* Touch-safe action button per tabelle/cards */
  .action-btn {
    @apply p-3 min-w-[44px] min-h-[44px]
           flex items-center justify-center rounded-lg
           text-gray-500 hover:text-gray-700 hover:bg-gray-100
           active:bg-gray-200 transition-colors;
  }

  .action-btn-primary {
    @apply action-btn text-agesci-blue hover:text-agesci-blue-light hover:bg-agesci-blue/10;
  }

  .action-btn-danger {
    @apply action-btn text-red-500 hover:text-red-700 hover:bg-red-50 active:bg-red-100;
  }

  .action-btn-success {
    @apply action-btn text-green-500 hover:text-green-700 hover:bg-green-50 active:bg-green-100;
  }
}

/* ========================================
   UTILITIES AGGIUNTIVE
   ======================================== */
@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  .bg-pattern-dots {
    background-image: radial-gradient(var(--agesci-blue) 1px, transparent 1px);
    background-size: 20px 20px;
  }

  .bg-pattern-lines {
    background-image: repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 10px,
      var(--agesci-blue) 10px,
      var(--agesci-blue) 11px
    );
    opacity: 0.05;
  }

  /* Gradient di sfondo */
  .gradient-scout {
    background: linear-gradient(135deg, var(--scout-cream) 0%, #f5f0e0 100%);
  }

  .gradient-blue {
    background: linear-gradient(135deg, var(--agesci-blue) 0%, var(--agesci-blue-light) 100%);
  }

  .gradient-yellow {
    background: linear-gradient(135deg, var(--agesci-yellow) 0%, var(--agesci-yellow-light) 100%);
  }

  /* Testo gradient */
  .text-gradient {
    @apply bg-clip-text text-transparent;
    background-image: linear-gradient(135deg, var(--agesci-blue) 0%, var(--lc-green) 100%);
  }

  /* ========================================
     TOUCH-FIRST UTILITIES
     ======================================== */

  /* Touch target minimo 44px */
  .touch-target {
    @apply min-h-[44px] min-w-[44px];
  }

  /* Padding responsive mobile-first */
  .p-mobile {
    @apply p-4 sm:p-6 lg:p-8;
  }

  .px-mobile {
    @apply px-4 sm:px-6 lg:px-8;
  }

  .py-mobile {
    @apply py-4 sm:py-6 lg:py-8;
  }
}

/* ========================================
   HOVER CONDIZIONALE - Solo dispositivi con mouse
   ======================================== */
@media (hover: hover) {
  .card-hover:hover {
    box-shadow: var(--tw-shadow-playful-lg, 0 8px 30px rgba(0, 65, 123, 0.15));
    transform: translateY(-4px);
  }
}

/* Touch feedback per dispositivi touch */
@media (hover: none) {
  .card-hover:active {
    box-shadow: var(--tw-shadow-playful, 0 4px 14px rgba(0, 65, 123, 0.1));
    transform: scale(0.99);
  }
}
